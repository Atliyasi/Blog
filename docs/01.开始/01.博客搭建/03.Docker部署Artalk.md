---
title: Dockeréƒ¨ç½²Artalk
date: 2024-03-05 01:43:41
permalink: /pages/1be984/
categories:
  - å¼€å§‹
  - åšå®¢æ­å»º
tags:
  - Docker
  - åšå®¢
  - Artalk
author: 
  name: Atliyasi
  link: https://github.com/Atliyasi
---
## Artalk

**Artalk** æ˜¯ä¸€æ¬¾ç®€æ´çš„**è‡ªæ‰˜ç®¡**è¯„è®ºç³»ç»Ÿ[Artalk](https://artalk.js.org/guide/intro.html)ã€‚æœ¬åšå®¢é‡‡ç”¨çš„è¯„è®ºç³»ç»Ÿå°±æ˜¯Artalk:smiley:ã€‚

## éƒ¨ç½²

:smiley:æœ€æ–¹ä¾¿çš„éƒ¨ç½²å°±æ˜¯Dockerï¼

è¿™é‡Œå’±ä¹Ÿæ˜¯é‡‡ç”¨Dockerï¼Œå°†Artalkéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚å…³äºDockerçš„å®‰è£…ä¸é…ç½®ç­‰åé¢ä¸“é—¨å‡ºä¸€ä¸ªæ–‡ç« è°ˆè°ˆå’±çš„ç»éªŒ:no_mouth:ã€‚

##### 1. Dockeråˆ›å»ºå¯¹åº”å®¹å™¨

```sh
docker run -d \
    --name artalk \
    -p 23366:23366 \
    -v $(pwd)/data:/data \
    --restart=always \
    artalk/artalk-go
```

ç›´æ¥åˆ›å»ºå³å¯ï¼ŒDockerçš„å¼€ç®±å³ç”¨çœŸæ˜¯å¤ªæ–¹ä¾¿äº†ï¼

##### 2. å®‰å…¨ç»„è®¾ç½®

äº‘æœåŠ¡å™¨éƒ½æœ‰ä¸€ä¸ªç±»ä¼¼äºé˜²ç«å¢™çš„é…ç½®ä¹Ÿå°±æ˜¯å®‰å…¨ç»„ï¼Œæˆ‘ä»¬è¦ç”¨è¿‡ç½‘ç»œè®¿é—®ç›¸åº”çš„æœåŠ¡å°±éœ€è¦å¼€æ”¾å¯¹åº”çš„ç«¯å£ã€‚

![å±å¹•æˆªå›¾ 2024-03-05 003637](http://123.60.218.218:1236/oss/test/3ff2e439e78fd25d721c12f626778c95)

##### 3.  åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·

```sh
docker exec -it artalk artalk admin
```

![image-20240305003947180](http://123.60.218.218:1236/oss/test/82dfa21418fc9db43e8501228932fb6a)

##### 4. è®¿é—®æœåŠ¡

ä½¿ç”¨å¯¹åº”çš„åŸŸå+ç«¯å£å·å³å¯è®¿é—®ArtalkæœåŠ¡ã€‚

![image-20240305004245248](http://123.60.218.218:1236/oss/test/35a955c468da34570b7d95fdff20a92a)

##### 5.ä¿®æ”¹Arttalké…ç½®

artalk çš„é…ç½®æ–‡ä»¶åœ¨ data ç›®å½•ä¸‹artalk.ymlï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ï¼Œä¹Ÿå¯ä»¥åœ¨ç®¡ç†åå°çš„é¡µé¢ä¸Šè¿›è¡Œé…ç½®ã€‚

è¿›å…¥å®¹å™¨æ‰¾åˆ°dataç›®å½•

![image-20240305012443774](http://123.60.218.218:1236/oss/test/64413f4f26ba374ee495d5e81d3151f6)

ä¸‹è¾¹æ˜¯æˆ‘ä½¿ç”¨çš„é…ç½®ä¿¡æ¯ï¼Œå…¶ä¸­éƒ¨åˆ†ä¿¡æ¯åšäº†è„±æ•ï¼š



```yaml
# æœåŠ¡å™¨åœ°å€
host: "0.0.0.0"
# æœåŠ¡å™¨ç«¯å£
port: 23366
# åŠ å¯†å¯†é’¥
app_key: "Atliyasi"
# è°ƒè¯•æ¨¡å¼
debug: false
# æ—¶é—´åŒºåŸŸ
timezone: "Asia/Shanghai"
# é»˜è®¤ç«™ç‚¹å
site_default: "Atliyasi"
# ç™»é™†æœ‰æ•ˆæ—¶é•¿ (å•ä½ï¼šç§’)
login_timeout: 259200
# æ•°æ®åº“
db:
  # æ•°æ®åº“ç±»å‹ ["sqlite", "mysql", "pgsql", "mssql"]
  type: "sqlite"
  # æ•°æ®åº“æ–‡ä»¶ (ä»… SQLite æ•°æ®åº“éœ€å¡«å†™)
  file: "./data/artalk-go.db"
  # æ•°æ®åº“åç§°
  name: "artalk"
  # æ•°æ®åº“åœ°å€
  host: "localhost"
  # æ•°æ®åº“ç«¯å£
  port: 3306
  # æ•°æ®åº“è´¦æˆ·
  user: "root"
  # æ•°æ®åº“å¯†ç 
  password: ""
  # ç¼–ç æ ¼å¼
  charset: "utf8mb4"
  # è¡¨å‰ç¼€ (ä¾‹å¦‚ï¼š"atk_")
  table_prefix: ""
# æ—¥å¿—
log:
  # å¯ç”¨æ—¥å¿—
  enabled: true
  # æ—¥å¿—æ–‡ä»¶è·¯å¾„
  filename: "./data/artalk-go.log"
# å¯ä¿¡åŸŸå
trusted_domains:
  - http://localhost:8080
  - http://chdclouds.com:23366
# ç¼“å­˜
cache:
  # ç¼“å­˜ç±»å‹ ["redis", "memcache", "builtin"]
  type: "builtin"
  # ç¼“å­˜è¿‡æœŸæ—¶é—´ (å•ä½ï¼šåˆ†é’Ÿ)
  expires: 30
  # ç¼“å­˜å¯åŠ¨é¢„çƒ­ (ç¨‹åºå¯åŠ¨æ—¶é¢„çƒ­ç¼“å­˜)
  warm_up: false
  # ç¼“å­˜æœåŠ¡å™¨åœ°å€ (ä¾‹å¦‚ï¼š"localhost:6379")
  server: ""
  # Redis é…ç½®
  redis:
    # è¿æ¥æ–¹å¼ ["tcp", "unix"]
    network: "tcp"
    # ç”¨æˆ·å
    username: ""
    # å¯†ç 
    password: ""
    # æ•°æ®åº“ç¼–å· (ä¾‹å¦‚ä½¿ç”¨é›¶å·æ•°æ®åº“å¡«å†™ 0)
    db: 0
# SSL
ssl:
  # å¯ç”¨ SSL
  enabled: false
  # è¯ä¹¦æ–‡ä»¶è·¯å¾„
  cert_path: ""
  # å¯†é’¥æ–‡ä»¶è·¯å¾„
  key_path: ""
# ç®¡ç†å‘˜è´¦æˆ·
admin_users:
  - name: "Atliyasi"
    email: "xxxxxxxxxx"
    password: "xxxxxxxxxx" # æ”¯æŒ bcrypt æˆ– md5 åŠ å¯†ï¼Œå¦‚ï¼š"(md5)50c21190c6e4e5418c6a90d2b5031119"
    badge_name: "ç®¡ç†å‘˜"
    badge_color: "#FF6C00"
# è¯„è®ºå®¡æ ¸
moderator:
  # é»˜è®¤å¾…å®¡ (å‘è¡¨æ–°è¯„è®ºéœ€è¦åå°äººå·¥å®¡æ ¸åæ‰èƒ½æ˜¾ç¤º)
  pending_default: 1
  # API è¯·æ±‚é”™è¯¯æ—¶æ‹¦æˆª (å…³é—­æ­¤é¡¹å½“è¯·æ±‚é”™è¯¯æ—¶è®©è¯„è®ºæ”¾è¡Œ)
  api_fail_block: 1
  # Akismet Key
  # (Akismet ååƒåœ¾æœåŠ¡ï¼Œhttps://akismet.com)
  akismet_key: ""
  # è…¾è®¯äº‘æ–‡æœ¬å†…å®¹å®‰å…¨
  # (https://cloud.tencent.com/document/product/1124/64508)
  tencent:
    enabled: false
    secret_id: ""
    secret_key: ""
    region: "ap-guangzhou"
  # é˜¿é‡Œäº‘å†…å®¹å®‰å…¨
  # (https://help.aliyun.com/document_detail/28417.html)
  aliyun:
    enabled: false
    access_key_id: ""
    access_key_secret: ""
    region: "cn-shanghai"
  # å…³é”®è¯è¿‡æ»¤ (æœ¬åœ°ç¦»çº¿è¯åº“)
  keywords:
    enabled: false
    # åŒ¹é…æˆåŠŸè®¾ä¸ºå¾…å®¡çŠ¶æ€
    pending: false
    # è¯åº“æ–‡ä»¶ (æ”¯æŒå¤šä¸ªè¯åº“æ–‡ä»¶)
    files:
      - "./data/è¯åº“_1.txt"
    # è¯åº“æ–‡ä»¶å†…å®¹åˆ†å‰²ç¬¦ (ä¾‹å¦‚å¡«å†™ "\n" æ–‡ä»¶ä¸­ä¸€è¡Œä¸€ä¸ªå…³é”®è¯)
    file_sep: "\n"
    # æ›¿æ¢å­—ç¬¦
    replac_to: "x"
# éªŒè¯ç 
captcha:
  # å¯ç”¨éªŒè¯ç 
  enabled: true
  # æ€»æ˜¯éœ€è¦éªŒè¯ç 
  always: false
  # æ¿€æ´»éªŒè¯ç æ‰€éœ€æ“ä½œæ¬¡æ•°
  action_limit: 3
  # é‡ç½®æ“ä½œè®¡æ•°å™¨è¶…æ—¶ (å•ä½ï¼šs, è®¾ä¸º -1 ä¸é‡ç½®)
  action_reset: 60
  # Geetest æéªŒ (https://www.geetest.com)
  geetest:
    enabled: false
    captcha_id: ""
    captcha_key: ""
# é‚®ä»¶é€šçŸ¥
email:
  # å¯ç”¨é‚®ä»¶é€šçŸ¥
  enabled: 1
  # å‘é€æ–¹å¼ ["smtp", "ali_dm", "sendmail"]
  send_type: "smtp"
  # å‘ä¿¡äººæ˜µç§°
  send_name: "{{reply_nick}}"
  # å‘ä¿¡äººåœ°å€
  send_addr: "1067037658@qq.com"
  # é‚®ä»¶æ ‡é¢˜
  mail_subject: "[{{site_name}}] æ‚¨æ”¶åˆ°äº†æ¥è‡ª @{{reply_nick}} çš„å›å¤"
  # é‚®ä»¶æ¨¡æ¿æ–‡ä»¶ (å¡«å…¥æ–‡ä»¶è·¯å¾„ä½¿ç”¨è‡ªå®šä¹‰æ¨¡æ¿)
  mail_tpl: "default"
  # SMTP å‘é€ (å¯ç”¨è¯·å°†å‘é€æ–¹å¼è®¾ä¸º "smtp")
  smtp:
    # å‘ä»¶åœ°å€
    host: "smtp.qq.com"
    # å‘ä»¶ç«¯å£
    port: 465
    # ç”¨æˆ·å
    username: "1067037658@qq.com"
    # å¯†ç 
    password: "xxxxxxxxxxx"
  # é˜¿é‡Œäº‘é‚®ä»¶æ¨é€
  # (å¯ç”¨è¯·å°†å‘é€æ–¹å¼è®¾ä¸º "ali_dm"ï¼›å‚è€ƒï¼šhttps://help.aliyun.com/document_detail/29444.html)
  ali_dm:
    access_key_id: ""
    access_key_secret: ""
    account_name: "noreply@example.com"
# å›¾ç‰‡ä¸Šä¼ 
img_upload:
  # å¯ç”¨å›¾ç‰‡ä¸Šä¼ 
  enabled: 0
  # å›¾ç‰‡å­˜æ”¾è·¯å¾„
  path: "./data/artalk-img/"
  # å›¾ç‰‡å¤§å°é™åˆ¶ (å•ä½ï¼šMB)
  max_size: 5
  # å›¾ç‰‡é“¾æ¥åŸºç¡€è·¯å¾„ (é»˜è®¤ä¸º "/static/images/")
  public_path: null
  # Upgit é…ç½®
  # (ä½¿ç”¨ Upgit å°†å›¾ç‰‡ä¸Šä¼ åˆ° GitHub æˆ–å›¾åºŠï¼šhttps://github.com/pluveto/upgit)
  upgit:
    # å¯ç”¨ Upgit
    enabled: false
    # å‘½ä»¤è¡Œå‚æ•°
    exec: "./upgit -c <upgité…ç½®æ–‡ä»¶è·¯å¾„> -t /artalk-img"
    # ä¸Šä¼ ååˆ é™¤æœ¬åœ°çš„å›¾ç‰‡
    del_local: true
# å¤šå…ƒæ¨é€
admin_notify:
  # é€šçŸ¥æ¨¡ç‰ˆ (å¡«å…¥æ–‡ä»¶è·¯å¾„ä½¿ç”¨è‡ªå®šä¹‰æ¨¡æ¿)
  notify_tpl: "default"
  # å˜ˆæ‚æ¨¡å¼
  noise_mode: false
  # é‚®ä»¶é€šçŸ¥ç®¡ç†å‘˜
  email:
    # å¼€å¯ (å½“ä½¿ç”¨å…¶ä»–æ¨é€æ–¹å¼æ—¶ï¼Œå¯ä»¥å…³é—­ç®¡ç†å‘˜é‚®ä»¶é€šçŸ¥)
    enabled: 0
    # é‚®ä»¶æ ‡é¢˜ (å‘é€ç»™ç®¡ç†å‘˜çš„é‚®ä»¶æ ‡é¢˜)
    mail_subject: "[{{site_name}}] æ‚¨çš„æ–‡ç« ã€Œ{{page_title}}ã€æœ‰æ–°å›å¤"
  # Telegram
  telegram:
    enabled: false
    api_token: ""
    receivers:
      - 7777777
  # Bark
  bark:
    enabled: false
    server: "http://day.app/xxxxxxx/"
  # é£ä¹¦
  lark:
    enabled: false
    webhook_url: ""
  # WebHook
  webhook:
    enabled: false
    url: ""
  # é’‰é’‰
  ding_talk:
    enabled: 1
    token: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    secret: "wiki"
  # Slack
  slack:
    enabled: false
    oauth_token: ""
    receivers:
      - "CHANNEL_ID"
  # LINE
  line:
    enabled: false
    channel_secret: ""
    channel_access_token: ""
    receivers:
      - "USER_ID_1"
      - "GROUP_ID_1"
# å‰ç«¯é…ç½®
frontend:
  # è¯„è®ºæ¡†å ä½æ–‡å­—
  placeholder: "è¯·æ­£ç¡®å¡«å†™é‚®ç®±ä»¥ä¾¿æ¥æ”¶å›å¤é€šçŸ¥,å¦‚éœ€æ·»åŠ å›¾ç‰‡,è¯·é€šè¿‡ç¬¬ä¸‰æ–¹å›¾åºŠå¼•ç”¨å›¾ç‰‡,è¯„è®ºæ”¯æŒMarkdownè¯­æ³•"
  # æ— è¯„è®ºæ˜¾ç¤ºæ–‡å­—
  noComment: "ã€Œæ­¤æ—¶æ— å£°èƒœæœ‰å£°ã€"
  # å‘é€æŒ‰é’®æ–‡å­—
  sendBtn: "æäº¤"
  # è¯„è®ºæ¡†æ—…è¡Œ
  editorTravel: 1
  # æš—é»‘æ¨¡å¼
  darkMode: false
  # è¡¨æƒ…åŒ…
  emoticons: "https://cdn.jsdelivr.net/gh/eryajf/emotion_generate/dist/artalk.json"
  # æŠ•ç¥¨æŒ‰é’®
  vote: true
  # åå¯¹æŒ‰é’®
  voteDown: false
  # ç”¨æˆ· UA å¾½æ ‡
  uaBadge: true
  # è¯„è®ºæ’åºåŠŸèƒ½
  listSort: true
  # é¡µé¢ PV ç»‘å®šå…ƒç´ 
  pvEl: "#ArtalkPV"
  # è¯„è®ºæ•°ç»‘å®šå…ƒç´ 
  countEl: "#ArtalkCount"
  # ç¼–è¾‘å™¨å®æ—¶é¢„è§ˆåŠŸèƒ½
  preview: true
  # å¹³é“ºæ¨¡å¼ ["auto", true, false]
  flatMode: "auto"
  # æœ€å¤§åµŒå¥—å±‚æ•°
  nestMax: 10
  # åµŒå¥—è¯„è®ºæ’åºè§„åˆ™ ["DATE_ASC", "DATE_DESC", "VOTE_UP_DESC"]
  nestSort: DATE_ASC
  # å¤´åƒ
  gravatar:
    # Gravatar é•œåƒåœ°å€
    mirror: "https://cravatar.cn/avatar/"
    # é»˜è®¤å¤´åƒ
    default: "mp"
  # è¯„è®ºåˆ†é¡µ
  pagination:
    # æ¯é¡µè¯„è®ºæ•°
    pageSize: 20
    # åŠ è½½æ›´å¤šæ¨¡å¼ (å…³é—­åˆ™ä½¿ç”¨åˆ†é¡µæ¡)
    readMore: true
    # æ»šåŠ¨åŠ è½½
    autoLoad: true
  # å†…å®¹é™é«˜
  heightLimit:
    # è¯„è®ºå†…å®¹é™é«˜ (å•ä½ï¼špx)
    content: 300
    # å­è¯„è®ºåŒºåŸŸé™é«˜ (å•ä½ï¼špx)
    children: 400
  # è¯·æ±‚è¶…æ—¶ (å•ä½ï¼šæ¯«ç§’)
  reqTimeout: 15000
  # ç‰ˆæœ¬æ£€æµ‹
  versionCheck: true

```



##### 6. åšå®¢ä¸­å¼•ç”¨Artalk

1. å®‰è£…[vuepress-plugin-vdoing-comment](https://github.com/terwer/vuepress-plugin-vdoing-comment)æ’ä»¶

```sh
npm install --save vuepress-plugin-vdoing-comment
```

2. é…ç½®æ’ä»¶

```js
[
  'vuepress-plugin-vdoing-comment', // è¯„è®º
   {
      choosen: 'artalk',
      options: {
        server: 'http://you-server:23366', // ArtalkæœåŠ¡åœ°å€ï¼ˆå¿…å¡«ï¼‰
        site: 'Atliyasi', // ç«™ç‚¹åç§°ï¼ˆå¿…å¡«ï¼‰
        disableEmotion: false, // æ˜¯å¦ç¦ç”¨è¡¨æƒ…ï¼ˆå¯é€‰ï¼‰
        disablePicture: true, // æ˜¯å¦ç¦ç”¨å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰
        disablePreview: false // æ˜¯å¦ç¦ç”¨é¢„è§ˆï¼ˆå¯é€‰ï¼‰
      }
    }
 ],
```

![image-20240305014246651](http://123.60.218.218:1236/oss/test/14371db203365f134fbe5a8a4778da69)

ğŸ¥³ å·²æˆåŠŸå®Œæˆ Artalk éƒ¨ç½²å’Œä½¿ç”¨ï¼